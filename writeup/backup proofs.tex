\noindent \textbf{Lemma 2 (Matching estimator)} Suppose Assumptions 3 holds, $T(w) \in B(w,\delta)$ always holds for $\delta$ in Assumption 3, and the observed units are $\{(c_j,w_j,y_j)\}_{1\leq j \leq N}$, then $E[\frac{1}{N}\sum_{j=1}^NE(Y^{obs}|W=T(w_j),\frac{e(W,C)}{e(T^{-1}(W),C)}=\frac{e(T(w_j),c_j)}{e(w_j,c_j)})]=E(Y(T(W)))$. 

\begin{proof}[Proof of Lemma 2] Since lemma 1 and Assumption 3 hold. 
\begin{align*}
    E(Y(T(W)))&=E[E(Y(T(W))|W,\frac{e(T(W),C)}{e(W,C)})]\\
    &=E[\frac{1}{N}\sum_{j=1}^NE(Y(T(W))|W=w_j,\frac{e(T(W),C)}{e(W,C)}=\frac{e(T(w_j),c_j)}{e(w_j,c_j)})]\\
    &=E[\frac{1}{N}\sum_{j=1}^NE(Y(T(w_j))|W=w_j,\frac{e(T(w_j),C)}{e(w_j,C)}=\frac{e(T(w_j),c_j)}{e(w_j,c_j)})]\\
    &=E[\frac{1}{N}\sum_{j=1}^NE(Y(T(w_j))|W=T(w_j),\frac{e(T(w_j),C)}{e(w_j,C)}=\frac{e(T(w_j),c_j)}{e(w_j,c_j)})]\\
    &=E[\frac{1}{N}\sum_{j=1}^NE(Y^{obs}|W=T(w_j),\frac{e(T(w_j),C)}{e(w_j,C)}=\frac{e(T(w_j),c_j)}{e(w_j,c_j)})]\\
    &=E[\frac{1}{N}\sum_{j=1}^NE(Y^{obs}|W=T(w_j),\frac{e(W,C)}{e(T^{-1}(W),C)}=\frac{e(T(w_j),c_j)}{e(w_j,c_j)})]
\end{align*}
\end{proof}
\noindent \textbf{Lemma 3 (Smooth matching estimator)} With some smoothing conditions, we have $lim_{\delta \to 0}E[\frac{1}{N}\sum_{j=1}^NE(Y^{obs}||W-T(w_j)|<\delta,|\frac{e(W,C)}{e(T^{-1}(W),C)}-\frac{e(T(w_j),c_j)}{e(w_j,c_j)}|<\delta)]=E(Y(T(W)))$
\begin{proof}[Proof of Lemma 3] 
Almost all derivations of Lemma 2 in the original paper can be directly used. We only need to change the integral region from $\tilde{w} \in [w-\delta,w+\delta]$ to $\tilde{w} \in B(w,\delta)$.
\end{proof}

\noindent \textbf{Lemma 4 (Same conditional covariate distribution)} In the same condition as Lemma 2, $f(C=c|\frac{e(T(w),C)}{e(w,C)}=e,W=w)=f(C=c|\frac{e(T(w),C)}{e(w,C)}=e,W=T(w))$ holds for all w, e and c. 
\begin{proof}[Proof of Lemma 4] 
For all c that satisfies $\frac{e(T(w),c)}{e(w,c)}=e$, we know that
\begin{align*}
    &f(C=c|\frac{e(T(w),C)}{e(w,C)}=e,W=w)\\
    \propto&f(C=c,\frac{e(T(w),C)}{e(w,C)}=e,W=w)\\
    =&f(C=c,\frac{e(T(w),C)}{e(w,C)}=e)e(w,c)\\
    =&\frac{1}{e}f(C=c,\frac{e(T(w),C)}{e(w,C)}=e)e(T(w),c)\\
    =&\frac{1}{e}f(C=c,\frac{e(T(w),C)}{e(w,C)}=e,W=T(w))\\
    \propto&f(C=c|\frac{e(T(w),C)}{e(w,C)}=e,W=w)
\end{align*}
holds. Here $\propto$ means the ratio between the two formula is a constant independent of c. Same as the proof of Lemma 2, we already prove Lemma 4.
\end{proof}